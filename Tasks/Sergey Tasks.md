# Декомпозиция проекта FakeNFT, модуль Корзина

---

## Эпик 1: Реализация экрана корзины (Cart Screen)
**Цель**: Создать функциональный экран корзины, который позволяет пользователю просматривать, редактировать и удалять товары из корзины, а также сортировать товары по различным критериям.

### Задачи и сроки:

1. **Создание модуля Cart** (1 день)
    - Создать папку `Scenes/Cart`, включающую:
        - `CartViewController.swift`
        - `CartCell.swift`
        - `CartService.swift`
        - `CartModel.swift`
2. **Реализация `CartViewController`** (3 дня)
    - Настроить `UITableView` для отображения товаров, добавленных в заказ.
    - Подключить загрузку данных о заказе с использованием метода `GET /api/v1/orders/{order_id}`.
    - Для каждого товара отобразить:
        - Изображение, название, рейтинг, цена, кнопка удаления.
        - Для получения детализированной информации о товаре использовать `GET /api/v1/nft/{nft_id}`.
3. **Реализация удаления товара из корзины** (2 дня)
    - При нажатии на кнопку удаления показывать экран подтверждения удаления (модальный контроллер).
    - Использовать метод `PUT /api/v1/orders/{order_id}` для удаления товара из заказа.
    - Обновить отображение корзины после удаления.
4. **Реализация сортировки товаров** (1 день)
    - Добавить кнопку сортировки, которая вызывает `UIAlertController` для выбора типа сортировки (по цене, рейтингу, названию).
    - Реализовать сортировку и обновление `UITableView`.
5. **Отображение итоговой панели** (1 день)
    - Внизу экрана отображать количество товаров, общую стоимость и кнопку "К оплате".
    - При нажатии на кнопку "К оплате" переходить на экран выбора валюты.
6. **Индикатор загрузки и обработка ошибок** (1 день)
    - Использовать `LoadingView` для отображения состояния загрузки.
    - Использовать `ErrorView` для обработки ошибок при загрузке данных.

**Ожидаемое время выполнения**: **1 неделя**

---

## Эпик 2: Реализация экрана выбора валюты и оплаты (Payment Screen)
**Цель**: Создать экран выбора валюты и отправки запроса на оплату заказа.

### Задачи и сроки:

1. **Создание модуля Payment** (1 день)
    - Создать папку `Scenes/Payment`, включающую:
        - `PaymentViewController.swift`
        - `PaymentCell.swift`
        - `PaymentService.swift`
        - `CurrencyModel.swift`
2. **Реализация `PaymentViewController`** (3 дня)
    - Настроить `UICollectionView` для отображения списка доступных валют.
    - Использовать метод `GET /api/v1/currencies` для загрузки списка валют.
    - Для каждой валюты отображать:
        - Логотип, полное наименование, сокращённое наименование.
    - При выборе валюты использовать `GET /api/v1/currencies/{currency_id}` для получения дополнительной информации.
3. **Реализация оплаты заказа** (2 дня)
    - Настроить кнопку "Оплатить" для выполнения оплаты.
    - Отправить запрос на сервер с использованием `GET /api/v1/orders/{order_id}/payment/{currency_id}` для проведения оплаты.
    - Обработка ответа:
        - При успешной оплате показывать экран с подтверждением и кнопкой "Вернуться в корзину".
        - При неудачной оплате показывать попап с возможностью повтора запроса.
4. **Отображение WebView для пользовательского соглашения** (1 день)
    - При нажатии на ссылку открывать WebView с URL [https://yandex.ru/legal/practicum_termsofuse/](https://yandex.ru/legal/practicum_termsofuse/).
5. **Обработка ошибок и индикатор загрузки** (1 день)
    - Использовать `LoadingView` и `ErrorView` для отображения состояния загрузки и ошибок.

**Ожидаемое время выполнения**: **1 неделя**

---

## Эпик 3: Обработка ошибок, тестирование и оптимизация (Final Stage)
**Цель**: Обеспечить стабильность работы приложения, финальное тестирование и оптимизация перед сдачей проекта.

### Задачи и сроки:

1. **Обработка ошибок и отображение сообщений пользователю** (2 дня)
    - Настроить обработку ошибок при работе с API (например, ошибки сети, некорректные данные).
    - Обработка ошибок для следующих методов:
        - `GET /api/v1/orders/{order_id}`
        - `PUT /api/v1/orders/{order_id}`
        - `GET /api/v1/currencies`
        - `GET /api/v1/orders/{order_id}/payment/{currency_id}`
        - `GET /api/v1/nft/{nft_id}`
2. **Тестирование и отладка всех модулей** (3 дня)
    - Написать юнит-тесты для созданных мной объектов.
    - Протестировать работу всех экранов и переходов (корзина → оплата).
3. **Оптимизация загрузки изображений** (1 день)
    - Использовать библиотеку `Kingfisher` для загрузки и кэширования изображений NFT.
4. **Реализация пустого состояния** (1 день)
    - Добавить отображение экрана "Корзина пуста" при отсутствии товаров.
    - Обработка пустого состояния на экране выбора валют.
5. **Документирование и финальная подготовка проекта** (2 дня)
    - Написать документацию в коде для основных классов и методов, созданных мной.
    - Провести финальную проверку перед сдачей.
    - Интеграция с другими модулями.

**Ожидаемое время выполнения**: **1 неделя**

---
